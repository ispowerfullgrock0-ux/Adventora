<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Form Pemesanan Adventora</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <link rel="stylesheet" href="/css/booking.css">
</head>

<body class="subpage">

  <header class="navbar" id="navbar">
  <div class="container nav-inner">
    <a class="brand" href="#home">
      <img src="/image/image2.png" alt="Adventora Logo" class="logo-img">
    </a>

    <nav class="nav-links" id="navLinks">
      <a href="rute-jember-surabaya.html#home">Home</a>
      <a href="rute-jember-surabaya.html#about">Mengapa Kami</a>
      <a href="rute-jember-surabaya.html#packages">Paket</a>
      <a href="rute-jember-surabaya.html#gallery">Armada</a>
      <a href="rute-jember-surabaya.html#testimonials">Testimoni</a>
      <a href="rute-jember-surabaya.html#contact">Kontak</a>
    </nav>

    <button class="nav-toggle" id="navToggle" aria-label="toggle menu">
      <i class="fas fa-bars"></i>
    </button>
  </div>
</header>

  <main class="main-content">
    <section class="section booking-form-section">
      <div class="container grid-booking">

        <!-- FORM PEMESANAN -->
        <div class="booking-card form-step">
          <h2>1. Detail Perjalanan</h2>
          <form id="bookingForm">

            <!-- Jenis Paket -->
            <div class="form-row">
              <label for="package">Jenis Layanan <span class="required">*</span></label>
              <select id="package" name="package" required>
                <option value="reguler">Reguler</option>
                <option value="vip">Vip</option>
              </select>
            </div>

            <!-- ADDON PAKET -->
            <div class="form-row">
              <label for="addon">Paket Tambahan (Optional)<span class="required">*</span></label>
              <select id="addon" name="addon">
                <option value="">--Tidak Ada--</option>
                <option value="Food Service">Food Service</option>
                <option value="Bagasi Extra">Bagasi Extra</option>
                <option value="Travel Kit Premium">Travel Kit Premium</option>
              </select>
            </div>

            <!-- Rute -->
            <div class="form-row">
              <label for="direction">Pilih Rute <span class="required">*</span></label>
              <select id="direction" name="direction" required>
                <option value="lumajang-surabaya">lumajang - Surabaya</option>
                <option value="surabaya-lumajang">Surabaya - lumajang</option>
              <input type="text" id="ruteInput" placeholder="cth: jember-jakarta" style="display:none;">
            </div>

            <div class="form-row">
              <label for="date">Tanggal Keberangkatan <span class="required">*</span></label>
              <input id="date" name="date" type="date" required>
            </div>

          <div class="form-row">
  <label for="time">pilih jam Keberangkatan<span class="required">*</span></label></label>
  <select id="time" name="time">
    <option value="">-- Pilih Jam --</option>
    <option value="06:00">06.00</option>
    <option value="09:00">09.00</option>
    <option value="15:00">15.00</option>
    <option value="21:00">21.00</option>
  </select>
</div>

            <div class="form-row">
              <label for="passengers">Jumlah Penumpang <span class="required">*</span></label>
              <input id="passengers" name="passengers" type="number" min="1" value="1" required>
            </div>

            <hr>
            <h2>2. Data Pemesan</h2>

            <div class="form-row">
              <label for="name">Nama Pemesan <span class="required">*</span></label>
              <input id="name" name="name" type="text" placeholder="Cth: Budi" required>
            </div>

            <div class="form-row">
              <label for="phone">No. Handphone (WA) <span class="required">*</span></label>
              <input id="phone" name="phone" type="tel" placeholder="Cth: 081234567890" required>
            </div>

            <div class="form-row">
              <label for="pickup">Alamat Penjemputan <span class="required">*</span></label>
              <input id="pickup" name="pickup" type="text" placeholder="Cth: Jl. Tidar No. 115 Jember" required>
            </div>

            <div class="form-row">
              <label for="destination">Alamat Tujuan <span class="required">*</span></label>
              <input id="destination" name="destination" type="text" placeholder="Cth: Bandara Juanda, Surabaya" required>
            </div>

            <div class="form-row">
              <label for="luggage">Barang Bawaan (Opsional)</label>
              <input id="luggage" name="luggage" type="text" placeholder="Cth: 2 koper">
            </div>

            <button type="submit" class="btn primary large-btn cta-pulse" id="submitBooking">
              <i class="fas fa-arrow-right"></i> Kirim
            </button>

          </form>
        </div>

        <!-- RANGKUMAN -->
        <div class="booking-summary-card">
          <h2>Rangkuman & Pembayaran</h2>
          <div class="summary-details">
            <p>Paket: <span id="summaryPackage">-----</span></p>
            <p>Addon: <span id="summaryAddon">Tidak ada</span></p>
            <p>Rute: <span id="summaryDirection">-----</span></p>
            <p>Tgl: <span id="summaryDate">Belum Dipilih</span></p>
            <p>Penumpang: <span id="summaryPassengers">-----</span></p>
            <p>Barang Bawaan: <span id="summaryLuggage">Tidak ada</span></p>
            <hr>
            <p class="total-price">Total Harga: <span id="summaryPrice">Rp.-----</span></p>
          </div>

          <div class="payment-info">
            <h3>Metode Pembayaran Transfer (Optional)</h3>
            <p>Harga yang tertera hanya untuk penjemputan & pengantaran dalam kota.</p>
            <div class="bank-detail">
              <p><strong>Silahkan langsung hubungi admin</strong></p>
              <p>Akan admin konfirmasi ulang jika pembayaran via Transfer</p>
            </div>

            <a href="https://wa.me/6281217241263" target="_blank" class="btn primary large-btn mt-3">
              <i class="fab fa-whatsapp"></i> Bayar Sekarang
            </a>
          </div>
        </div>

      </div>
    </section>
  </main>

  <!-- ================= SCRIPT ================= -->

<script>
// ===== NAVBAR =====
const navbar = document.querySelector('.navbar');
const navToggle = document.getElementById('navToggle');
const navLinks = document.getElementById('navLinks');

window.addEventListener("scroll", () => {
  navbar.classList.toggle("scrolled", window.scrollY > 50);
});

navToggle.addEventListener("click", () => {
  navLinks.classList.toggle("open");
  const icon = navToggle.querySelector("i");
  icon.classList.toggle("fa-bars");
  icon.classList.toggle("fa-times");
});

// ===== RUTE LAIN =====
(function() {
  const direction = document.getElementById('direction');
  const ruteInput = document.getElementById('ruteInput');
  let ruteIndex = [...direction.options].findIndex(opt => opt.value === 'rute-lain');

  direction.addEventListener('change', () => {
    if (direction.value === 'rute-lain') {
      ruteInput.style.display = 'block';
      ruteInput.focus();
    } else {
      ruteInput.style.display = 'none';
      ruteInput.value = '';
    }
    updateSummary();
  });

  ruteInput.addEventListener('input', () => {
    const txt = ruteInput.value.trim() || 'Rute Lain...';
    direction.options[ruteIndex].text = txt;
    direction.options[ruteIndex].value = txt.toLowerCase().replace(/\s+/g, '-');
    updateSummary();
  });
})();

// ===== DATA HARGA RUTE =====
const hargaRute = {
  "reguler": {
    "surabaya-lumajang": 150000,
    "lumajang-surabaya": 150000,
    "jember-probolinggo": 175000,
    "probolinggo-jember": 175000,
    "jember-pasuruan": 175000,
    "pasuruan-jember": 175000,
    "jember-surabaya": 200000,
    "surabaya-jember": 200000,
    "jember-malang": 200000,
    "malang-jember": 200000
  },
  "vip": {
    "surabaya-lumajang": 750000,
    "lumajang-surabaya": 750000,
    "jember-probolinggo": 875000,
    "probolinggo-jember": 875000,
    "jember-pasuruan": 875000,
    "pasuruan-jember": 875000,
    "jember-surabaya": 1000000,
    "surabaya-jember": 1000000,
    "jember-malang": 1000000,
    "malang-jember": 1000000
  }
};

// ===== DATA HARGA ADDON =====
const hargaAddon = {
  "": 0,
  "Food Service": 35000,
  "Bagasi Extra": 100000,
  "Travel Kit Premium": 50000,
};

// ===== UPDATE RINGKASAN =====
function updateSummary() {
  const pkgSelect = document.getElementById('package');
  const pkg = pkgSelect.value;
  const pkgText = pkgSelect.selectedOptions[0]?.text || "-----";

  const addonSelect = document.getElementById('addon');
  const addonText = addonSelect.selectedOptions[0]?.text || "Tidak ada";

  const passengers = Number(document.getElementById('passengers').value) || 1;
  const date = document.getElementById('date').value || "Belum Dipilih";
  const luggage = document.getElementById('luggage').value || "Tidak ada";

  const dirSelect = document.getElementById('direction');
  const dirValue = dirSelect.value;
  const dirText = dirSelect.selectedOptions[0]?.text || "-----";

  // Hitung harga addon
  let addonPrice = hargaAddon[addonText] || 0;
  if (addonText === "Food Service") {
    addonPrice = 35000 + (passengers - 1) * 15000;
  }

  // Cek jika rute lain â†’ harga tidak tersedia
  if (dirText.toLowerCase().includes("rute lain") || !hargaRute[pkg]?.[dirValue]) {
    document.getElementById('summaryPrice').textContent = "Rp -----";
    return;
  }

  // Hitung harga rute
  const jumlah = pkg === "vip" ? 1 : passengers;
  const basePrice = hargaRute[pkg][dirValue] * jumlah;

  // Total harga
  const totalHarga = basePrice + addonPrice;

  // Update ringkasan
  document.getElementById('summaryPackage').textContent = pkgText;
  document.getElementById('summaryAddon').textContent = addonText;
  document.getElementById('summaryDirection').textContent = dirText;
  document.getElementById('summaryPassengers').textContent = passengers + " Orang";
  document.getElementById('summaryDate').textContent = date;
  document.getElementById('summaryLuggage').textContent = luggage;
  document.getElementById('summaryPrice').textContent =
    `Rp ${new Intl.NumberFormat('id-ID').format(totalHarga)}`;
}

// Event listener untuk update otomatis
document.getElementById('bookingForm').addEventListener('input', updateSummary);
document.getElementById('addon').addEventListener('change', updateSummary);
updateSummary();

// ===== KIRIM KE WHATSAPP =====
document.getElementById('bookingForm').addEventListener('submit', e => {
  e.preventDefault();

  const pkgText = document.getElementById('package').selectedOptions[0].text;
  const addonText = document.getElementById('addon').selectedOptions[0].text || "Tidak ada";
  const passengers = Number(document.getElementById('passengers').value) || 1;

  const dirText = document.getElementById('direction').selectedOptions[0].text;

  // Hitung harga addon WA
  let addonPrice = hargaAddon[addonText] || 0;
  if (addonText === "Food Service") {
    addonPrice = 35000 + (passengers - 1) * 15000;
  }

  // Hitung harga rute WA
  const pkg = document.getElementById('package').value;
  const dirValue = document.getElementById('direction').value;
  const jumlah = pkg === "vip" ? 1 : passengers;
  let basePrice = 0;
  if (hargaRute[pkg]?.[dirValue]) {
    basePrice = hargaRute[pkg][dirValue] * jumlah;
  }
  const totalHarga = basePrice + addonPrice;

  // Ambil data lain
  const name = document.getElementById('name').value.trim();
  const phone = document.getElementById('phone').value.trim();
  const date = document.getElementById('date').value;
  const time = document.getElementById('time').value || '--';
  const pickup = document.getElementById('pickup').value.trim();
  const destination = document.getElementById('destination').value.trim();
  const luggage = document.getElementById('luggage').value.trim() || 'Tidak ada';

  const message = `
Halo Adventora, saya ingin pesan travel ${pkgText}!

*DETAIL PEMESANAN*

- Nama: ${name}
- HP/WA: ${phone}
- Jenis Layanan: ${pkgText}
- Paket Tambahan: ${addonText} (Rp ${addonPrice.toLocaleString("id-ID")})
- Rute: ${dirText}
- Tanggal: ${date}   
- Pukul: ${time}
- Penumpang: ${passengers} orang
- Penjemputan: ${pickup}
- Tujuan: ${destination}
- Barang bawaan: ${luggage}
- Total Harga: Rp ${totalHarga.toLocaleString("id-ID")}

Mohon konfirmasi Selanjutnya ya!

Terima kasih!

www.adventora.web.id
  `;

  window.open(`https://wa.me/6281217241263?text=${encodeURIComponent(message)}`, "_blank");
});
</script>

</body>
</html>